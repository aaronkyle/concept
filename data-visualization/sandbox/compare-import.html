<!DOCTYPE html>
<html lang="en">

<head>
     <!-- Bootstrap Core CSS -->
  <!-- <link href="css/bootstrap.min.css" rel="stylesheet"> -->

  <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.1.3/css/bootstrap.min.css" integrity="sha384-MCw98/SFnGE8fJT3GXwEOngsV7Zt27NXFoaoApmYm81iuXoPkFOJwJ8ERdknLPMO" crossorigin="anonymous">


<link href="https://cdnjs.cloudflare.com/ajax/libs/c3/0.4.10/c3.min.css" rel="stylesheet" type="text/css">


<!--
<style>
/* https://css-tricks.com/full-width-containers-limited-width-parents/ */
.fullwidth {
  width: 40vw;
  position: relative;
  left: 40%;
  right: 40%;
  margin-left: -50vw;
  margin-right: -50vw;
}
#cao_institution { min-height: 20vw }
</style>
-->
    
</head>
<body>

  <!-- Thanks to <a href="https://beta.observablehq.com/@fil">Philippe Rivi√®re's</a> Jekyll port of <a href="https://beta.observablehq.com/@fil/tissots-indicatrix">tissots-indicatrix</a> for demonstrating this code. -->

      <!-- Page Content -->
  <div class="container">
 <div class="row">
  <div class="col-sm-8"><div id="cao_institution"></div></div>
</div>  
  <div class="row">
       <div class="col-sm-8"><div id="chart"></div></div>
</div>
  
  </div>
  <!-- /.container -->
    
<script type="module">

    // NOTEBOOK CONFIGURATION
  import notebook from "https://api.observablehq.com/@aaronkyle/cao-caseload-budget-2000-2017.js?key=2737a67c8ffce01c";

  // BOILERPLATE
  const target = document.querySelector("#cao_institution");
  const renders = {
    "cao_budget": "div.fullwidth",
  };

  import {Inspector, Runtime} from "https://unpkg.com/@observablehq/notebook-runtime@1.2.0?module";
  for (let i in renders) {
    let s = renders[i], a = s.match(/^\w+/);
    if (a) {
      renders[i] = document.createElement(a[0]);
      target.appendChild(renders[i]);
      if (a = s.match(/\.(\w+)$/))
        renders[i].className = a[1]; 
    }
    else
      renders[i] = document.querySelector(renders[i]);
  }
  Runtime.load(notebook, (variable) => {
    if (renders[variable.name]) {
      return new Inspector(renders[variable.name]);
    } else {
      // return true; // uncomment to run hidden cells
    }
  });
</script>

     <!-- Bootstrap 4 -->
  <script src="https://code.jquery.com/jquery-3.3.1.slim.min.js" integrity="sha384-q8i/X+965DzO0rT7abK41JStQIAqVgRVzpbzo5smXKp4YfRvH+8abtTE1Pi6jizo" crossorigin="anonymous"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.3/umd/popper.min.js" integrity="sha384-ZMP7rVo3mIykV+2+9J3UJ46jBk0WLaUAdn689aCwoqbBJiSnjAK/l8WvCWPIPm49" crossorigin="anonymous"></script>
  <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.1.3/js/bootstrap.min.js" integrity="sha384-ChfqqxuZUCnJSK3+MXmPNIyE6ZbWh2IMqE241rYiqJxyMiZ6OW/JmZQ5stwEULTy" crossorigin="anonymous"></script>

     
 <script src="https://d3js.org/d3.v3.min.js" charset="utf-8"></script>
 <script src="https://cdnjs.cloudflare.com/ajax/libs/c3/0.4.10/c3.min.js"></script>
    <script>

    var chart = c3.generate({
        bindto: '#chart',
        data: {
        x: 'x',
        columns: [
      ['x', 'FY00', 'FY01', 'FY02', 'FY03', 'FY04', 'FY05', 'FY06', 'FY07', 'FY08', 'FY09', 'FY10', 'FY11', 'FY12', 'FY13', 'FY14', 'FY15', 'FY16', 'FY17'],
      //['open cases', 0, 7, 10, 12, 14, 19, 12, 17, 19, 18, 23, 24, 33, 42, 54, 63, 52, 51],//
      ['new eligible cases', 0, 7, 3, 10, 9, 17, 6, 10, 7, 11, 16, 12, 19, 26, 38, 46, 43, 41],
      ['carry-over cases', 0, 0, 7, 2, 5, 2, 6, 7, 12, 7, 7, 12, 14, 16, 16, 17, 9, 10],
      ['complex cases', 0, 6, 7, 7, 8, 11, 6, 3, 6, 8, 11, 15, 24, 33, 38, 46, 43, 45],
      ['total budget (constant USD)', 0, 1359300, 1700900, 2248200, 2417400, 2966850, 2966850, 2658700, 3009100, 3930000, 4212200, 4320000, 4883000, 5026800, 5671300, 5059600, 5896200, 6289700],
      ['expensed contingency budget', null, null, null, null, 317500, 451500, 428700, 0, 287700, 613100, 768000, 743600, 706800, 753800, 80000, 732580, 877500, 911800] //VALUES ARE GENERALIZED AND ARE NOT 'OFFICAL' STATISTICS FROM CAO.
      //In building this visualization I generalized the values based on analysis of the chart.  I provide this for illustrative purposes.
    ],
    axes: {
      'total budget (constant USD)': 'y2',
      'expensed contingency budget': 'y2'
    },
    groups: [
        ['carry-over cases', 'new eligible cases']
    ],
    types: {
      //'open cases': 'bar',//
      'carry-over cases': 'bar',
      'new eligible cases': 'bar', // ADD
    }
  },
  legend: {
     position: 'inset'
          },
  axis: {
    x: {
    type: 'category',
        tick: {
                rotate: -45,
                multiline: false
              },
        height: 40
      },
    y: {
      label: {
        text: 'open cases',
        position: 'outer-middle'
      }
    },
    y2: {
      show: true,
      max: 12000000,
      min: 0,
      padding: {top:0, bottom:0},
      label: {
        text: 'total budget',
        position: 'outer-middle'
            }
          }
        }
    });

    </script>


  
</body>
<html>
